<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SimpleDJ</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="assets/css/poppins.css">
    <link rel="stylesheet" href="assets/css/fontawesome.min.css">
</head>
<body>
    <div class="app-container">
        <!-- Custom Title Bar -->
        <div class="title-bar">
            <div class="title-bar-controls">
                <span class="app-title">SimpleDJ</span>
                <span class="safe-mode-indicator" id="safeModeIndicator" style="display: none;">
                    <i class="fas fa-lock"></i> Safe Mode
                </span>
            </div>
            <div class="title-bar-buttons">
                <button class="title-button minimize" id="minimizeBtn">
                    <i class="fas fa-minus"></i>
                </button>
                <button class="title-button maximize" id="maximizeBtn">
                    <i class="fas fa-square"></i>
                </button>
                <button class="title-button close" id="closeBtn">
                    <i class="fas fa-times"></i>
                </button>
            </div>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Sidebar -->
            <div class="sidebar">
                <div class="sidebar-header">
                    <h2><i class="fas fa-music"></i> Playlists</h2>
                    <button class="btn-icon" id="addPlaylistBtn" title="Add Playlist">
                        <i class="fas fa-plus"></i>
                    </button>
                </div>
                <div class="playlist-list" id="playlistList">
                    <!-- Playlists will be populated here -->
                </div>
                <div class="sidebar-footer">
                    <button class="btn-secondary full-width" id="keyboardShortcutsBtn">
                        <i class="fas fa-keyboard"></i> Shortcuts
                    </button>
                    <br /><br />
                    <button class="btn-secondary full-width" id="aboutBtn">
                        <i class="fas fa-info-circle"></i> About
                    </button>
                    <br/><br />
                    <button class="btn-secondary full-width" id="settingsBtn">
                        <i class="fas fa-cog"></i> Settings
                    </button>
                </div>
            </div>

            <!-- Main Player Area -->
            <div class="player-area">
                <!-- Current Track Display -->
                <div class="current-track">
                    <div class="track-art">
                        <div class="track-art-placeholder" id="trackArt">
                            <i class="fas fa-music"></i>
                        </div>
                    </div>
                    <div class="track-info">
                        <div class="track-title" id="trackTitle">Select a playlist to start</div>
                        <div class="track-artist" id="trackArtist">No track playing</div>
                        <div class="track-album" id="trackAlbum"></div>
                    </div>
                </div>

                <!-- Progress Bar -->
                <div class="progress-container">
                    <span class="time-display" id="currentTime">0:00</span>
                    <div class="progress-bar-container">
                        <div class="progress-bar" id="progressBar">
                            <div class="progress-fill" id="progressFill"></div>
                            <div class="progress-handle" id="progressHandle"></div>
                        </div>
                    </div>
                    <span class="time-display" id="totalTime">0:00</span>
                </div>

                <!-- Player Controls -->
                <div class="player-controls">
                    <button class="btn-control" id="shuffleBtn" title="Shuffle">
                        <i class="fas fa-random"></i>
                    </button>
                    <button class="btn-control" id="previousBtn" title="Previous">
                        <i class="fas fa-step-backward"></i>
                    </button>
                    <button class="btn-control-primary" id="playPauseBtn" title="Play/Pause">
                        <i class="fas fa-play"></i>
                    </button>
                    <button class="btn-control" id="nextBtn" title="Next">
                        <i class="fas fa-step-forward"></i>
                    </button>
                    <button class="btn-control" id="repeatBtn" title="Repeat">
                        <i class="fas fa-redo"></i>
                    </button>
                </div>

                <!-- Volume and Equalizer -->
                <div class="audio-controls">
                    <div class="volume-control">
                        <button class="btn-icon" id="muteBtn" title="Mute">
                            <i class="fas fa-volume-up"></i>
                        </button>
                        <div class="volume-slider-container">
                            <div class="progress-bar" id="volumeSliderBar" data-min="0" data-max="100" data-value="70" data-step="1">
                                <div class="progress-fill" id="volumeSliderFill" style="width: 70%"></div>
                                <div class="progress-handle" id="volumeSliderHandle" style="left: 70%"></div>
                            </div>
                        </div>
                        <span class="volume-display" id="volumeDisplay">70%</span>
                        <div class="fade-controls">
                            <button class="btn-secondary fade-btn" id="fadeOutBtn" title="Fade Out">
                                <i class="fas fa-volume-down"></i> Fade Out
                            </button>
                            <button class="btn-secondary fade-btn" id="fadeInBtn" title="Fade In">
                                <i class="fas fa-volume-up"></i> Fade In
                            </button>
                        </div>
                    </div>
                    <div class="equalizer-control">
                        <button class="btn-secondary" id="equalizerBtn">
                            <i class="fas fa-sliders-h"></i> EQ
                        </button>
                    </div>
                </div>

                <!-- Track List -->
                <div class="track-list-container">
                    <div class="track-list-header">
                        <h3 id="currentPlaylistTitle">Track List</h3>
                    </div>
                    <div class="track-list" id="trackList" ondrop="dropHandler(event)" ondragover="dragOverHandler(event)">
                        <div class="empty-playlist">
                            <i class="fas fa-music"></i>
                            <p>No tracks in playlist</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Equalizer Modal -->
        <div class="modal" id="equalizerModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Equalizer</h3>
                    <button class="btn-icon" id="closeEqModal">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="equalizer-container">
                    <br>
                    <div class="eq-presets">
                        <button class="eq-preset-btn active" data-preset="flat">Flat</button>
                        <button class="eq-preset-btn" data-preset="pop">Pop</button>
                        <button class="eq-preset-btn" data-preset="rock">Rock</button>
                        <button class="eq-preset-btn" data-preset="jazz">Jazz</button>
                        <button class="eq-preset-btn" data-preset="classical">Classical</button>
                        <button class="eq-preset-btn" data-preset="bass-boost">Bass Boost</button>
                    </div>
                    <div class="eq-sliders">
                        <div class="eq-band">
                            <label>60Hz</label>
                            <div class="progress-bar eq-slider" id="eq-slider-60" data-frequency="60" data-min="-12" data-max="12" data-value="0" data-step="0.1">
                                <div class="progress-fill" style="height: 50%"></div>
                                <div class="progress-handle" style="top: 50%"></div>
                            </div>
                            <span class="eq-value">0dB</span>
                        </div>
                        <div class="eq-band">
                            <label>170Hz</label>
                            <div class="progress-bar eq-slider" id="eq-slider-170" data-frequency="170" data-min="-12" data-max="12" data-value="0" data-step="0.1">
                                <div class="progress-fill" style="height: 50%"></div>
                                <div class="progress-handle" style="top: 50%"></div>
                            </div>
                            <span class="eq-value">0dB</span>
                        </div>
                        <div class="eq-band">
                            <label>350Hz</label>
                            <div class="progress-bar eq-slider" id="eq-slider-350" data-frequency="350" data-min="-12" data-max="12" data-value="0" data-step="0.1">
                                <div class="progress-fill" style="height: 50%"></div>
                                <div class="progress-handle" style="top: 50%"></div>
                            </div>
                            <span class="eq-value">0dB</span>
                        </div>
                        <div class="eq-band">
                            <label>1kHz</label>
                            <div class="progress-bar eq-slider" id="eq-slider-1000" data-frequency="1000" data-min="-12" data-max="12" data-value="0" data-step="0.1">
                                <div class="progress-fill" style="height: 50%"></div>
                                <div class="progress-handle" style="top: 50%"></div>
                            </div>
                            <span class="eq-value">0dB</span>
                        </div>
                        <div class="eq-band">
                            <label>3kHz</label>
                            <div class="progress-bar eq-slider" id="eq-slider-3000" data-frequency="3000" data-min="-12" data-max="12" data-value="0" data-step="0.1">
                                <div class="progress-fill" style="height: 50%"></div>
                                <div class="progress-handle" style="top: 50%"></div>
                            </div>
                            <span class="eq-value">0dB</span>
                        </div>
                        <div class="eq-band">
                            <label>6kHz</label>
                            <div class="progress-bar eq-slider" id="eq-slider-6000" data-frequency="6000" data-min="-12" data-max="12" data-value="0" data-step="0.1">
                                <div class="progress-fill" style="height: 50%"></div>
                                <div class="progress-handle" style="top: 50%"></div>
                            </div>
                            <span class="eq-value">0dB</span>
                        </div>
                        <div class="eq-band">
                            <label>12kHz</label>
                            <div class="progress-bar eq-slider" id="eq-slider-12000" data-frequency="12000" data-min="-12" data-max="12" data-value="0" data-step="0.1">
                                <div class="progress-fill" style="height: 50%"></div>
                                <div class="progress-handle" style="top: 50%"></div>
                            </div>
                            <span class="eq-value">0dB</span>
                        </div>
                        <div class="eq-band">
                            <label>14kHz</label>
                            <div class="progress-bar eq-slider" id="eq-slider-14000" data-frequency="14000" data-min="-12" data-max="12" data-value="0" data-step="0.1">
                                <div class="progress-fill" style="height: 50%"></div>
                                <div class="progress-handle" style="top: 50%"></div>
                            </div>
                            <span class="eq-value">0dB</span>
                        </div>
                        <div class="eq-band">
                            <label>16kHz</label>
                            <div class="progress-bar eq-slider" id="eq-slider-16000" data-frequency="16000" data-min="-12" data-max="12" data-value="0" data-step="0.1">
                                <div class="progress-fill" style="height: 50%"></div>
                                <div class="progress-handle" style="top: 50%"></div>
                            </div>
                            <span class="eq-value">0dB</span>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn-secondary" id="resetEqBtn">Reset</button>
                </div>
            </div>
        </div>

        <!-- Add Playlist Modal -->
        <div class="modal" id="addPlaylistModal">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>Create New Playlist</h3>
                    <button class="btn-icon" id="closeAddPlaylistModal">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="modal-body">
                    <input type="text" id="playlistNameInput" placeholder="Enter playlist name..." maxlength="50">
                </div>
                <div class="modal-footer">
                    <button class="btn-secondary" id="cancelAddPlaylistBtn">Cancel</button>
                    <button class="btn-primary" id="createPlaylistBtn">Create</button>
                </div>
            </div>
        </div>

        <!-- Edit Playlist Modal -->
        <div class="modal" id="editPlaylistModal">
            <div class="modal-content playlist-editor">
                <div class="modal-header">
                    <h2><i class="fas fa-edit"></i> Edit Playlist</h2>
                    <button class="btn-icon" id="closeEditPlaylistModal">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="playlist-info-section">
                        <div class="input-group">
                            <label for="editPlaylistName">Playlist Name</label>
                            <input type="text" id="editPlaylistName" class="form-input" placeholder="Enter playlist name">
                        </div>
                        <div class="input-group">
                            <label for="editPlaylistDescription">Description</label>
                            <textarea id="editPlaylistDescription" class="form-input" rows="3" placeholder="Enter playlist description (optional)"></textarea>
                        </div>
                    </div>
                    
                    <div class="tracks-editor-section">
                        <div class="tracks-editor-header">
                            <h3><i class="fas fa-list"></i> Track Order</h3>
                            <button class="btn-primary" id="importMusicBtn">
                                <i class="fas fa-plus"></i> Add Songs
                            </button>
                        </div>
                        <div class="tracks-editor" id="tracksEditor">
                            <!-- Sortable track list will be populated here -->
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn-danger" id="deletePlaylistBtn">
                        <i class="fas fa-trash"></i> Delete Playlist
                    </button>
                    <div class="modal-actions">
                        <button class="btn-secondary" id="cancelEditPlaylistBtn">Cancel</button>
                        <button class="btn-primary" id="savePlaylistBtn">Save Changes</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Confirmation Dialog -->
        <div class="modal" id="confirmDeleteModal">
            <div class="modal-content confirm-dialog">
                <div class="modal-header">
                    <h2><i class="fas fa-exclamation-triangle"></i> Confirm Delete</h2>
                </div>
                <div class="modal-body">
                    <p>Are you sure you want to delete this playlist?</p>
                    <p class="warning-text">This action cannot be undone.</p>
                </div>
                <div class="modal-footer">
                    <button class="btn-secondary" id="cancelDeleteBtn">Cancel</button>
                    <button class="btn-danger" id="confirmDeleteBtn">Delete</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div class="modal" id="settingsModal">
        <div class="modal-overlay">
            <div class="modal-content">
                <div class="modal-header">
                    <h2><i class="fas fa-cog"></i> Settings</h2>
                    <button class="btn-icon" id="closeSettingsModal">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="modal-body">

                    <div class="settings-section">
                        <h3><i class="fas fa-lock"></i> Security & Safety</h3>
                        <div class="input-group">
                            <label for="safeModeToggle">Safe/Lock Mode (Read Only)</label>
                            <div class="toggle-group">
                                <div class="toggle-switch" id="safeModeToggle">
                                    <input type="checkbox" id="safeModeCheckbox">
                                    <label for="safeModeCheckbox" class="toggle-slider">
                                        <span class="toggle-knob"></span>
                                    </label>
                                </div>
                            </div>
                            <small class="help-text">When enabled, only allows playback controls (play/pause, next/prev, volume, fade). Prevents editing playlists or changing settings.</small>
                        </div>
                    </div>

                    <div class="settings-section">
                        <h3><i class="fas fa-exchange-alt"></i> Audio Settings</h3>
                        <div class="input-group">
                            <label for="crossfadeToggle">Crossfade Enabled</label>
                            <div class="toggle-group">
                                <div class="toggle-switch" id="crossfadeToggle">
                                    <input type="checkbox" id="crossfadeCheckbox" checked>
                                    <label for="crossfadeCheckbox" class="toggle-slider">
                                        <span class="toggle-knob"></span>
                                    </label>
                                </div>
                            </div>
                        </div>
                        <div class="input-group">
                            <label for="crossfadeTimeSlider">Crossfade Duration</label>
                            <div class="slider-group">
                                <div class="progress-bar" id="crossfadeTimeSlider" data-min="1" data-max="10" data-value="3" data-step="0.5">
                                    <div class="progress-fill" id="crossfadeTimeSliderFill" style="width: 22.2%"></div>
                                    <div class="progress-handle" id="crossfadeTimeSliderHandle" style="left: 22.2%"></div>
                                </div>
                                <span id="crossfadeTimeValue">3.0s</span>
                            </div>
                        </div>
                    </div>

                    <div class="settings-section">
                        <h3><i class="fas fa-volume-up"></i> Fade Controls</h3>
                        <div class="input-group">
                            <label for="fadeOutDurationSlider">Fade Out Duration</label>
                            <div class="slider-group">
                                <div class="progress-bar" id="fadeOutDurationSlider" data-min="1" data-max="10" data-value="3" data-step="0.5">
                                    <div class="progress-fill" id="fadeOutDurationSliderFill" style="width: 22.2%"></div>
                                    <div class="progress-handle" id="fadeOutDurationSliderHandle" style="left: 22.2%"></div>
                                </div>
                                <span id="fadeOutDurationValue">3.0s</span>
                            </div>
                        </div>
                        <div class="input-group">
                            <label for="fadeInDurationSlider">Fade In Duration</label>
                            <div class="slider-group">
                                <div class="progress-bar" id="fadeInDurationSlider" data-min="1" data-max="10" data-value="3" data-step="0.5">
                                    <div class="progress-fill" id="fadeInDurationSliderFill" style="width: 22.2%"></div>
                                    <div class="progress-handle" id="fadeInDurationSliderHandle" style="left: 22.2%"></div>
                                </div>
                                <span id="fadeInDurationValue">3.0s</span>
                            </div>
                        </div>
                    </div>

                    <div class="settings-section">
                        <h3><i class="fas fa-list"></i> Playlist Management</h3>
                        <div class="input-group">
                            <label for="defaultPlaylistSelect">Default Playlist on Startup</label>
                            <select id="defaultPlaylistSelect" class="form-select">
                                <option value="">None (Show empty)</option>
                            </select>
                        </div>
                    </div>

                    <div class="settings-section">
                        <h3><i class="fas fa-database"></i> Data Management</h3>
                        <div class="input-group">
                            <p>Export or import all your application data including playlists, settings, and preferences.</p>
                        </div>
                        <div class="settings-buttons">
                            <button class="btn-primary" id="exportPlaylistsBtn">
                                <i class="fas fa-download"></i> Export All Data
                            </button>
                            <button class="btn-primary" id="importPlaylistsBtn">
                                <i class="fas fa-upload"></i> Import All Data
                            </button>
                        </div>
                    </div>

                    <div class="settings-section danger-section">
                        <h3><i class="fas fa-exclamation-triangle"></i> Danger Zone</h3>
                        <div class="warning-text">
                            <p><strong>Warning:</strong> This action cannot be undone!</p>
                        </div>
                        <button class="btn-danger" id="clearSessionBtn">
                            <i class="fas fa-trash-alt"></i> Clear All Data
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Keyboard Shortcuts Modal -->
    <div class="modal" id="keyboardShortcutsModal">
        <div class="modal-overlay">
            <div class="modal-content">
                <div class="modal-header">
                    <h2><i class="fas fa-keyboard"></i> Keyboard Shortcuts</h2>
                    <button class="btn-icon" id="closeKeyboardShortcutsModal">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="shortcuts-grid">
                        <div class="shortcut-category">
                            <h4>Playback Control</h4>
                            <div class="shortcut-item">
                                <span class="key-combo">Space</span>
                                <span class="shortcut-description">Play / Pause</span>
                            </div>
                            <div class="shortcut-item">
                                <span class="key-combo">Shift + ←</span>
                                <span class="shortcut-description">Previous Track</span>
                            </div>
                            <div class="shortcut-item">
                                <span class="key-combo">Shift + →</span>
                                <span class="shortcut-description">Next Track</span>
                            </div>
                            <div class="shortcut-item">
                                <span class="key-combo">←</span>
                                <span class="shortcut-description">Seek Back 10s</span>
                            </div>
                            <div class="shortcut-item">
                                <span class="key-combo">→</span>
                                <span class="shortcut-description">Seek Forward 10s</span>
                            </div>
                            <div class="shortcut-item">
                                <span class="key-combo">↑</span>
                                <span class="shortcut-description">Volume Up (+5%)</span>
                            </div>
                            <div class="shortcut-item">
                                <span class="key-combo">↓</span>
                                <span class="shortcut-description">Volume Down (-5%)</span>
                            </div>
                            <div class="shortcut-item">
                                <span class="key-combo">CTRL + ↑</span>
                                <span class="shortcut-description">Fade In</span>
                            </div>
                            <div class="shortcut-item">
                                <span class="key-combo">CTRL + ↓</span>
                                <span class="shortcut-description">Fade Out</span>
                            </div>
                        </div>
                        
                        <div class="shortcut-category">
                            <h4>Playlist Control</h4>
                            <div class="shortcut-item">
                                <span class="key-combo">S</span>
                                <span class="shortcut-description">Toggle Shuffle</span>
                            </div>
                            <div class="shortcut-item">
                                <span class="key-combo">R</span>
                                <span class="shortcut-description">Toggle Repeat</span>
                            </div>
                        </div>
                        
                        <div class="shortcut-category">
                            <h4>Interface</h4>
                            <div class="shortcut-item">
                                <span class="key-combo">F1</span>
                                <span class="shortcut-description">Show Keyboard Shortcuts</span>
                            </div>
                            <div class="shortcut-item">
                                <span class="key-combo">F2</span>
                                <span class="shortcut-description">Open About Dialog</span>
                            </div>
                            <div class="shortcut-item">
                                <span class="key-combo">F8</span>
                                <span class="shortcut-description">Toggle Safe Mode</span>
                            </div>
                            <div class="shortcut-item">
                                <span class="key-combo">F10</span>
                                <span class="shortcut-description">Open Equalizer</span>
                            </div>
                            <div class="shortcut-item">
                                <span class="key-combo">F11</span>
                                <span class="shortcut-description">Toggle Fullscreen</span>
                            </div>
                            <div class="shortcut-item">
                                <span class="key-combo">F12</span>
                                <span class="shortcut-description">Open Settings</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- About Modal -->
    <div class="modal" id="aboutModal">
        <div class="modal-overlay">
            <div class="modal-content">
                <div class="modal-header">
                    <h2><i class="fas fa-info-circle"></i> About SimpleDJ</h2>
                    <button class="btn-icon" id="closeAboutModal">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="about-content">
                        <div class="app-info">
                            <div class="app-icon">
                                <i class="fas fa-music"></i>
                            </div>
                            <h4>SimpleDJ</h4>
                            <p class="version">Version 1.0.0</p>
                            <p class="description">A simple yet powerful DJ application for mixing and playing your favorite music, for any occasion. Built with modern web technologies for a smooth and responsive experience.</p>
                        </div>
                        
                        <div class="features-list">
                            <h5>Features</h5>
                            <ul>
                                <li>Built-in crossfade to the next track</li>
                                <li>Built-in equalizer with multiple bands</li>
                                <li>Playlist management and editor</li>
                                <li>Complete data backup and restore functionality</li>
                                <li>Keyboard shortcuts for quick control</li>
                            </ul>
                        </div>
                        
                        <div class="developer-info">
                            <p class="developer-note">Developed by HBIDamian (Damian Hall-Beal)</p>
                            <p class="copyright">© 2025 HBIDamian . All rights reserved.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Clear Data Confirmation Modal -->
    <div class="modal" id="clearDataConfirmModal">
        <div class="modal-overlay">
            <div class="modal-content confirm-dialog">
                <div class="modal-header">
                    <h2><i class="fas fa-exclamation-triangle" style="color: #dc2626;"></i> Clear All Data</h2>
                </div>
                <div class="modal-body">
                    <div style="text-align: center; margin-bottom: 20px;">
                        <i class="fas fa-trash-alt" style="font-size: 48px; color: #dc2626; margin-bottom: 20px;"></i>
                        <h3 style="color: var(--text-primary); margin-bottom: 15px;">Are you absolutely sure?</h3>
                        <p style="color: var(--text-secondary); margin-bottom: 10px;">This action will <strong>permanently delete</strong>:</p>
                        <ul style="color: var(--text-secondary); text-align: left; max-width: 300px; margin: 0 auto 20px;">
                            <li>All playlists and tracks</li>
                            <li>All audio settings and preferences</li>
                            <li>Equalizer settings</li>
                            <li>Session data and history</li>
                        </ul>
                        <div class="warning-text">
                            <p><strong style="color: #dc2626;">This cannot be undone!</strong></p>
                            <p>The application will close after clearing data.</p>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn-secondary" id="cancelClearDataBtn">Cancel</button>
                    <button class="btn-danger" id="confirmClearDataBtn">
                        <i class="fas fa-trash-alt"></i> Clear All Data & Exit
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Audio Element -->
    <audio id="audioPlayer" preload="metadata"></audio>

    <script src="renderer.js"></script>
</body>
</html>
